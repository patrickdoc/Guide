<!DOCTYPE html>
<html lang="en">
<head profile="http://www.w3.org/2005/10/profile">
    <meta charset="UTF-8">
    <meta name="description" content="Port67">
    <meta name="author" content="Patrick Dougherty">
    <meta name=viewport content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" href="/css/structure.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <nav>
            <a id="beacon" href="/">
                <div id="home-text"> Port67 </div>
            </a>
        </nav>
    </header>

    <div id="page">
        <div class="wrapper">
            <div class="masthead">
                <span class="title">
                    Arrays
                </span>
            </div>
        </div>

        <article class="post">
            <p><span class="sentence">From our basic types of <code>char</code>, <code>unsigned</code>, <code>int</code>, and <code>float</code>, we can construct more types.</span> <span class="sentence">The first we have access to is the “array”.</span> <span class="sentence">In C, an “array” is a group of values all lined up next to each other.</span> <span class="sentence">Declaring a new array variable is easy:</span></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="dt">char</span> my_array[<span class="dv">3</span>];</span></code></pre></div>
<p><span class="sentence">This line declares a new variable named <code>my_array</code>, which holds 3 <code>char</code>’s.</span> <span class="sentence">Arrays can hold many values, but they all have to be the same type.</span> <span class="sentence">This is due to the size issue that types solved in the first place.</span> <span class="sentence">If I am going to have multiple values, then I definitely need to know how much space to allocate for each of them.</span></p>
<p><span class="sentence">In the upcoming pictures, I am going to introduce this shorthand for all of our sanity.</span></p>
<pre><code>                char
+---+---+---+---+   +---+---+---+---+
| 1 | 0 | 0 | 1 |   | 1 | 0 | 0 | 0 |
+---+---+---+---+   +---+---+---+---+
        \                   /
         \                 /
              +========+
              |  char  |
              +========+</code></pre>
<p><span class="sentence">I am going to compress a type’s bit representation into this smaller box so that I can include multiple next to each other in a reasonable amount of space.</span></p>
<p><span class="sentence">Back to our array, what does it look like?</span> <span class="sentence">Well, it is 3 <code>char</code>’s perfectly lined up in memory.</span></p>
<pre><code>          my_array
+========+========+========+
|  char  |  char  |  char  |
+========+========+========+</code></pre>
<p><span class="sentence">Because we know how big a <code>char</code> is, we know how big a <code>my_array</code> is: <code>3 * sizeof(char)</code>.</span> <span class="sentence">In this case, <code>my_array</code> is 3 bytes.</span> <span class="sentence">We can even check this to make sure I know what I am talking about.</span></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="dt">int</span> main(<span class="dt">int</span> argc, <span class="dt">char</span> **argv) {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>    <span class="dt">char</span> my_array[<span class="dv">3</span>];</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>    printf(<span class="st">&quot;my_array is %d bytes long</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="kw">sizeof</span>(my_array));</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>}</span></code></pre></div>
<p><span class="sentence">The <code>sizeof</code> keyword in C takes a variable or type and returns the number of bytes it takes up.</span> <span class="sentence">Running our code, we see:</span></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a>$ <span class="ex">./a.out</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="ex">my_array</span> is 3 bytes long</span></code></pre></div>
<p><span class="sentence">If you change <code>my_array</code> to be an array of <code>int</code>’s instead of <code>char</code>’s, how big will it be?</span> <span class="sentence">Guess, and then check for yourself by modifying the code above.</span> <span class="sentence">Next, try guessing how changing the number of elements stored will affect the size.</span> <span class="sentence">Check that too.</span></p>
<h2 id="using-arrays">Using Arrays</h2>
<p><span class="sentence">At this point, you have seen enough <code>main</code> functions to replicate them on your own, so I am going to just give you the important lines and let you fill in the rest.</span> <span class="sentence">Hopefully you have plenty of examples from previous lessons to work from now!</span></p>
<p><span class="sentence">We can initialize the values of an array just like so:</span></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="dt">unsigned</span> my_array[<span class="dv">3</span>] = {<span class="dv">74</span>, <span class="dv">11</span>, <span class="dv">9</span>};</span></code></pre></div>
<p><span class="sentence">If we put more numbers inside the <code>{}</code>’s than we have asked for, we <em>might</em> get a warning.</span> <span class="sentence">If we put fewer than we ask for, and then try to use an uninitialized value, we almost certainly won’t.</span> <span class="sentence">These are the dangers of C.</span> <span class="sentence">My goal is to give you enough knowledge to avoid these issues most of the time and debug when you have to.</span></p>
<p><span class="sentence">To access values, we use a very similar syntax:</span></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="dt">unsigned</span> first  = my_array[<span class="dv">0</span>];</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="dt">unsigned</span> second = my_array[<span class="dv">1</span>];</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a><span class="dt">unsigned</span> third  = my_array[<span class="dv">2</span>];</span></code></pre></div>
<p><span class="sentence">This can be a point of confusion, so let’s take a second to understand it.</span> <span class="sentence">When we count the elements of an array, we start at 0.</span> <span class="sentence">Here’s the picture again:</span></p>
<pre><code>|         my_array         |
+========+========+========+
|  char  |  char  |  char  |
+========+========+========+
|  first | second | third  |</code></pre>
<p><span class="sentence">The value we give within the <code>[]</code>’s is an “index”.</span> <span class="sentence">It represents some element within the array.</span> <span class="sentence"><code>my_array</code> tells us where the start, and then the index tells us how much to move over.</span> <span class="sentence">Let’s update our picture:</span></p>
<pre><code>my_array
   |
   V
   +========+========+========+
   |  char  |  char  |  char  |
   +========+========+========+
                     ^
                     |
              my_array + 2*sizeof(char)</code></pre>
<p><span class="sentence">So our index tells the computer how much to move over.</span> <span class="sentence">The nifty thing is that this syntax works even if we change types, and therefore size of elements in the array.</span></p>
<pre><code>my_array
   |
   V
   +========+========+========+
   |   int  |   int  |   int  |
   +========+========+========+
                     ^
                     |
              my_array + 2*sizeof(int)</code></pre>
<p><span class="sentence">As you can see, our picture is exactly the same!</span> <span class="sentence">Because the compiler knows the type of the elements in the array, it can adjust however it needs to.</span> <span class="sentence">This takes a lot of work off the programmer.</span> <span class="sentence">Instead of trying to figure out how many bytes of an offset we need, we just write <code>my_array[2]</code> and get the third element every time.</span></p>
<p><span class="sentence">Hopefully the index numbers make some sense now.</span> <span class="sentence">To get the first element of the array, we start at the beginning and move over <code>0*sizeof(type)</code>, where <code>type</code> is the type of elements in the array.</span> <span class="sentence">To get the last value in the array, we start at the beginning and move over <code>(length - 1)*sizeof(type)</code>, where <code>length</code> is the number of elements in the array.</span></p>
            <br>
            <br>
            <section class="table-of-contents">
                <ol>
                </ol>
            </section>
        </article>
    </div>

    <footer>
        <hr>
        <div class="links">
          <p>
            ©
            <a href="mailto:patrick.doc@port67.org">Patrick Dougherty</a>
            -
            <a href="https://github.com/patrickdoc/port67">source</a>
          </p>
        </div>
    </footer>
    
    <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Lora&display=swap" rel="stylesheet">
</body>
</html>
